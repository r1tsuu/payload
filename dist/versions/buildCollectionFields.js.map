{"version":3,"sources":["../../src/versions/buildCollectionFields.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../collections/config/types.js'\nimport type { Field } from '../fields/config/types.js'\n\nexport const buildVersionCollectionFields = (collection: SanitizedCollectionConfig): Field[] => {\n  const fields: Field[] = [\n    {\n      name: 'parent',\n      type: 'relationship',\n      index: true,\n      relationTo: collection.slug,\n    },\n    {\n      name: 'version',\n      type: 'group',\n      fields: collection.fields.filter((field) => !('name' in field) || field.name !== 'id'),\n    },\n    {\n      name: 'createdAt',\n      type: 'date',\n      admin: {\n        disabled: true,\n      },\n      index: true,\n    },\n    {\n      name: 'updatedAt',\n      type: 'date',\n      admin: {\n        disabled: true,\n      },\n      index: true,\n    },\n  ]\n\n  if (collection?.versions?.drafts) {\n    fields.push({\n      name: 'latest',\n      type: 'checkbox',\n      admin: {\n        disabled: true,\n      },\n      index: true,\n    })\n  }\n\n  if (collection?.versions?.drafts && collection?.versions?.drafts?.autosave) {\n    fields.push({\n      name: 'autosave',\n      type: 'checkbox',\n      index: true,\n    })\n  }\n\n  return fields\n}\n"],"names":["buildVersionCollectionFields","collection","fields","name","type","index","relationTo","slug","filter","field","admin","disabled","versions","drafts","push","autosave"],"mappings":"AAGA,OAAO,MAAMA,+BAA+B,CAACC;IAC3C,MAAMC,SAAkB;QACtB;YACEC,MAAM;YACNC,MAAM;YACNC,OAAO;YACPC,YAAYL,WAAWM,IAAI;QAC7B;QACA;YACEJ,MAAM;YACNC,MAAM;YACNF,QAAQD,WAAWC,MAAM,CAACM,MAAM,CAAC,CAACC,QAAU,CAAE,CAAA,UAAUA,KAAI,KAAMA,MAAMN,IAAI,KAAK;QACnF;QACA;YACEA,MAAM;YACNC,MAAM;YACNM,OAAO;gBACLC,UAAU;YACZ;YACAN,OAAO;QACT;QACA;YACEF,MAAM;YACNC,MAAM;YACNM,OAAO;gBACLC,UAAU;YACZ;YACAN,OAAO;QACT;KACD;IAED,IAAIJ,YAAYW,UAAUC,QAAQ;QAChCX,OAAOY,IAAI,CAAC;YACVX,MAAM;YACNC,MAAM;YACNM,OAAO;gBACLC,UAAU;YACZ;YACAN,OAAO;QACT;IACF;IAEA,IAAIJ,YAAYW,UAAUC,UAAUZ,YAAYW,UAAUC,QAAQE,UAAU;QAC1Eb,OAAOY,IAAI,CAAC;YACVX,MAAM;YACNC,MAAM;YACNC,OAAO;QACT;IACF;IAEA,OAAOH;AACT,EAAC"}