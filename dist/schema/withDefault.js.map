{"version":3,"sources":["../../src/schema/withDefault.ts"],"sourcesContent":["import type { PgColumnBuilder } from 'drizzle-orm/pg-core'\nimport type { FieldAffectingData } from 'payload'\n\nconst escapeSQLString = (input: string) => {\n  return input.replace(`'`, `''`)\n}\n\nexport const withDefault = (\n  column: PgColumnBuilder,\n  field: FieldAffectingData,\n): PgColumnBuilder => {\n  if (typeof field.defaultValue === 'function' || typeof field.defaultValue === 'undefined')\n    return column\n\n  return column.default(\n    typeof field.defaultValue === 'string'\n      ? escapeSQLString(field.defaultValue)\n      : field.defaultValue,\n  )\n}\n"],"names":["escapeSQLString","input","replace","withDefault","column","field","defaultValue","default"],"mappings":"AAGA,MAAMA,kBAAkB,CAACC;IACvB,OAAOA,MAAMC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;AAChC;AAEA,OAAO,MAAMC,cAAc,CACzBC,QACAC;IAEA,IAAI,OAAOA,MAAMC,YAAY,KAAK,cAAc,OAAOD,MAAMC,YAAY,KAAK,aAC5E,OAAOF;IAET,OAAOA,OAAOG,OAAO,CACnB,OAAOF,MAAMC,YAAY,KAAK,WAC1BN,gBAAgBK,MAAMC,YAAY,IAClCD,MAAMC,YAAY;AAE1B,EAAC"}