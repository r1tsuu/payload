{"version":3,"sources":["../../src/utilities/logger.ts"],"sourcesContent":["import pinoImport from 'pino'\nimport pinoPrettyImport from 'pino-pretty'\n\nconst pino = (pinoImport.default || pinoImport) as unknown as typeof pinoImport.default\nconst pinoPretty = (pinoPrettyImport.default ||\n  pinoPrettyImport) as unknown as typeof pinoPrettyImport.default\n\nexport type PayloadLogger = pinoImport.default.Logger\n\nconst prettyOptions: pinoPrettyImport.PrettyOptions = {\n  colorize: true,\n  ignore: 'pid,hostname',\n  translateTime: 'SYS:HH:MM:ss',\n}\n\nexport const defaultLoggerOptions: pinoImport.default.LoggerOptions = {\n  transport: {\n    options: prettyOptions,\n    target: 'pino-pretty',\n  },\n}\n\nexport const prettySyncLoggerDestination = pinoPretty({\n  ...prettyOptions,\n  destination: 1, // stdout\n  sync: true,\n})\n\nconst getLogger = (\n  name = 'payload',\n  options?: pinoImport.default.LoggerOptions,\n  destination?: pinoImport.default.DestinationStream,\n): PayloadLogger => {\n  if (options) {\n    return pino(\n      {\n        name: options?.name || name,\n        enabled: process.env.DISABLE_LOGGING !== 'true',\n        ...(options || defaultLoggerOptions),\n      },\n      destination,\n    )\n  }\n\n  return pino(prettySyncLoggerDestination)\n}\n\nexport default getLogger\n"],"names":["pinoImport","pinoPrettyImport","pino","default","pinoPretty","prettyOptions","colorize","ignore","translateTime","defaultLoggerOptions","transport","options","target","prettySyncLoggerDestination","destination","sync","getLogger","name","enabled","process","env","DISABLE_LOGGING"],"mappings":"AAAA,OAAOA,gBAAgB,OAAM;AAC7B,OAAOC,sBAAsB,cAAa;AAE1C,MAAMC,OAAQF,WAAWG,OAAO,IAAIH;AACpC,MAAMI,aAAcH,iBAAiBE,OAAO,IAC1CF;AAIF,MAAMI,gBAAgD;IACpDC,UAAU;IACVC,QAAQ;IACRC,eAAe;AACjB;AAEA,OAAO,MAAMC,uBAAyD;IACpEC,WAAW;QACTC,SAASN;QACTO,QAAQ;IACV;AACF,EAAC;AAED,OAAO,MAAMC,8BAA8BT,WAAW;IACpD,GAAGC,aAAa;IAChBS,aAAa;IACbC,MAAM;AACR,GAAE;AAEF,MAAMC,YAAY,CAChBC,OAAO,SAAS,EAChBN,SACAG;IAEA,IAAIH,SAAS;QACX,OAAOT,KACL;YACEe,MAAMN,SAASM,QAAQA;YACvBC,SAASC,QAAQC,GAAG,CAACC,eAAe,KAAK;YACzC,GAAIV,WAAWF,oBAAoB;QACrC,GACAK;IAEJ;IAEA,OAAOZ,KAAKW;AACd;AAEA,eAAeG,UAAS"}