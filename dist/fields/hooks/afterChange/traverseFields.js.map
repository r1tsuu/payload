{"version":3,"sources":["../../../../src/fields/hooks/afterChange/traverseFields.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../../../collections/config/types.js'\nimport type { SanitizedGlobalConfig } from '../../../globals/config/types.js'\nimport type { PayloadRequestWithData, RequestContext } from '../../../types/index.js'\nimport type { Field, TabAsField } from '../../config/types.js'\n\nimport { promise } from './promise.js'\n\ntype Args = {\n  collection: SanitizedCollectionConfig | null\n  context: RequestContext\n  data: Record<string, unknown>\n  doc: Record<string, unknown>\n  fields: (Field | TabAsField)[]\n  global: SanitizedGlobalConfig | null\n  operation: 'create' | 'update'\n  path: (number | string)[]\n  previousDoc: Record<string, unknown>\n  previousSiblingDoc: Record<string, unknown>\n  req: PayloadRequestWithData\n  schemaPath: string[]\n  siblingData: Record<string, unknown>\n  siblingDoc: Record<string, unknown>\n}\n\nexport const traverseFields = async ({\n  collection,\n  context,\n  data,\n  doc,\n  fields,\n  global,\n  operation,\n  path,\n  previousDoc,\n  previousSiblingDoc,\n  req,\n  schemaPath,\n  siblingData,\n  siblingDoc,\n}: Args): Promise<void> => {\n  const promises = []\n\n  fields.forEach((field) => {\n    promises.push(\n      promise({\n        collection,\n        context,\n        data,\n        doc,\n        field,\n        global,\n        operation,\n        parentPath: path,\n        parentSchemaPath: schemaPath,\n        previousDoc,\n        previousSiblingDoc,\n        req,\n        siblingData,\n        siblingDoc,\n      }),\n    )\n  })\n\n  await Promise.all(promises)\n}\n"],"names":["promise","traverseFields","collection","context","data","doc","fields","global","operation","path","previousDoc","previousSiblingDoc","req","schemaPath","siblingData","siblingDoc","promises","forEach","field","push","parentPath","parentSchemaPath","Promise","all"],"mappings":"AAKA,SAASA,OAAO,QAAQ,eAAc;AAmBtC,OAAO,MAAMC,iBAAiB,OAAO,EACnCC,UAAU,EACVC,OAAO,EACPC,IAAI,EACJC,GAAG,EACHC,MAAM,EACNC,MAAM,EACNC,SAAS,EACTC,IAAI,EACJC,WAAW,EACXC,kBAAkB,EAClBC,GAAG,EACHC,UAAU,EACVC,WAAW,EACXC,UAAU,EACL;IACL,MAAMC,WAAW,EAAE;IAEnBV,OAAOW,OAAO,CAAC,CAACC;QACdF,SAASG,IAAI,CACXnB,QAAQ;YACNE;YACAC;YACAC;YACAC;YACAa;YACAX;YACAC;YACAY,YAAYX;YACZY,kBAAkBR;YAClBH;YACAC;YACAC;YACAE;YACAC;QACF;IAEJ;IAEA,MAAMO,QAAQC,GAAG,CAACP;AACpB,EAAC"}